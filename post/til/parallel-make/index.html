<!DOCTYPE html>
<html lang="en">

    <head><title>TIL: Parallel `make` &ndash; Charles Ancheta</title>

<meta name="description" content="I&#39;ve always kind of known about the `-j` flag for `make`, but I didn&#39;t know that **it just works**.">


<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8"/>




<link rel="stylesheet" href="https://charles.thyck.top/styles/risotto.min.ddc86cedd56f601a31494f30308bebeb59a546115259df9b372b4339234421562bd02be7d6794519d641e2ed9ee8035085814598034b9186658a36f325af60ad.css" integrity="sha512-3chs7dVvYBoxSU8wMIvr61mlRhFSWd&#43;bNytDOSNEIVYr0Cvn1nlFGdZB4u2e6ANQhYFFmANLkYZlijbzJa9grQ==">
<link rel="alternate" type="application/rss+xml" href="https://charles.thyck.top//index.xml" title="Charles Ancheta">

    </head>

    <body>
        <div class="page">

            <header class="page__header"><h1 class="page__logo"><a href="https://charles.thyck.top/" class="page__logo-inner">Charles Ancheta</a></h1>
<nav class="page__nav main-nav">
    <ul>
    
    
    <li class="main-nav__item"><a class="nav-main-item" href="https://charles.thyck.top/work/" title="">Work</a></li>
    
    <li class="main-nav__item"><a class="nav-main-item" href="https://charles.thyck.top/projects/" title="">Projects</a></li>
    
    <li class="main-nav__item"><a class="nav-main-item" href="https://charles.thyck.top/post/" title="">Posts</a></li>
    
    </ul>
</nav>

</header>

            <section class="page__body">
    <header class="content__header">
        <h1>TIL: Parallel <code>make</code></h1>
    </header>
    <div class="content__body">
        <p>I&rsquo;ve always kind of known about the <code>-j</code> flag for <code>make</code>, but I didn&rsquo;t know
that <strong>it just works</strong>.</p>
<p>I started <a href="https://github.com/cbebe/monkey-cpp">dabbling in C++ again</a>, which
meant dealing with <code>Makefiles</code>, compilation orders, and the like. I&rsquo;m not sure
what part of my code is slowing down my compilation times, but it is
disappointing coming from Go and C. It&rsquo;s even slower than a clean Rust build!!</p>
<p>I thought to myself that maybe there&rsquo;s a way to parallelize the compilation
steps, after doing some setup. I was wrong, it did not need any setup. Just
slap a <code>-j</code> in there for infinite jobs and you&rsquo;re good.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Without -j</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>chrlz@workstation master monke<span style="color:#f92672">]</span>$ time make all
</span></span><span style="display:flex;"><span>mkdir -p obj
</span></span><span style="display:flex;"><span>g++ -c -o obj/token.o -std<span style="color:#f92672">=</span>c++20 -Wall -Wextra -pedantic -O3 src/token.cpp
</span></span><span style="display:flex;"><span>g++ -c -o obj/lexer.o -std<span style="color:#f92672">=</span>c++20 -Wall -Wextra -pedantic -O3 src/lexer.cpp
</span></span><span style="display:flex;"><span>g++ -c -o obj/ast.o -std<span style="color:#f92672">=</span>c++20 -Wall -Wextra -pedantic -O3 src/ast.cpp
</span></span><span style="display:flex;"><span>g++ -c -o obj/parser.o -std<span style="color:#f92672">=</span>c++20 -Wall -Wextra -pedantic -O3 src/parser.cpp
</span></span><span style="display:flex;"><span>g++ -c -o repl.o -std<span style="color:#f92672">=</span>c++20 -Wall -Wextra -pedantic -O3 repl.cpp
</span></span><span style="display:flex;"><span>g++ -o monke_repl -std<span style="color:#f92672">=</span>c++20 -Wall -Wextra -pedantic -O3 obj/token.o obj/lexer.o obj/ast.o obj/parser.o repl.o
</span></span><span style="display:flex;"><span>make all  9.08s user 0.66s system 99% cpu 9.748 total
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># With -j</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>chrlz@workstation master monke<span style="color:#f92672">]</span>$ time make -j all
</span></span><span style="display:flex;"><span>mkdir -p obj
</span></span><span style="display:flex;"><span>g++ -c -o repl.o -std<span style="color:#f92672">=</span>c++20 -Wall -Wextra -pedantic -O3 repl.cpp
</span></span><span style="display:flex;"><span>g++ -c -o obj/token.o -std<span style="color:#f92672">=</span>c++20 -Wall -Wextra -pedantic -O3 src/token.cpp
</span></span><span style="display:flex;"><span>g++ -c -o obj/lexer.o -std<span style="color:#f92672">=</span>c++20 -Wall -Wextra -pedantic -O3 src/lexer.cpp
</span></span><span style="display:flex;"><span>g++ -c -o obj/ast.o -std<span style="color:#f92672">=</span>c++20 -Wall -Wextra -pedantic -O3 src/ast.cpp
</span></span><span style="display:flex;"><span>g++ -c -o obj/parser.o -std<span style="color:#f92672">=</span>c++20 -Wall -Wextra -pedantic -O3 src/parser.cpp
</span></span><span style="display:flex;"><span>g++ -o monke_repl -std<span style="color:#f92672">=</span>c++20 -Wall -Wextra -pedantic -O3 obj/token.o obj/lexer.o obj/ast.o obj/parser.o repl.o
</span></span><span style="display:flex;"><span>make -j all  10.27s user 0.77s system 255% cpu 4.317 total
</span></span></code></pre></div><p>It basically cuts down my compilation time by 50%. I feel like a real dummy
now.</p>
    </div>
    <footer class="content__footer">
        <script src="https://utteranc.es/client.js"
        repo="cbebe/charles.thyck.top"
        issue-term="pathname"
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script>

    </footer>

            </section>

            <section class="page__aside">
                <div class="aside__about">
<div class="aside__about">
  <img class="about__logo" src="https://charles.thyck.top/favicon.ico" width="24" height="24" alt="Logo">
  <h1 class="about__title">Charles Ancheta</h1>
  <p class="about__description">Computer Engineer</p>
</div>


<ul class="aside__social-links">
  
  <li>
    <a href="https://github.com/cbebe" rel="me" aria-label="GitHub" title="GitHub">GitHub</a>
  </li>
  
  <li>
    <a href="https://www.linkedin.com/in/charles-ancheta" rel="me" aria-label="LinkedIn" title="LinkedIn">LinkedIn</a>
  </li>
  
  <li>
    <a href="/index.xml" rel="me" aria-label="RSS" title="RSS">RSS</a>
  </li>
  
  <li>
    <a href="mailto:cancheta.dev@gmail.com" rel="me" aria-label="Email" title="Email">Email</a>
  </li>
  
  <li>
    <a href="https://mastodon.social/@cbebe" rel="me" aria-label="Mastodon" title="Mastodon">Mastodon</a>
  </li>
  
</ul>
</div>
                <hr>
                <div class="aside__content">
    <p>I&#39;ve always kind of known about the `-j` flag for `make`, but I didn&#39;t know that **it just works**.</p>
    
        <p>
            By Charles Ancheta, 
            2023-05-30
        </p>
        
            <p>
                tags:
            
                <a href="/tags/til">til</a>
            
                <a href="/tags/make">make</a>
            
                <a href="/tags/gnu">gnu</a>
            
                <a href="/tags/compilation">compilation</a>
            
                <a href="/tags/c&#43;&#43;">c&#43;&#43;</a>
            
            </p>
        
    

                </div>
            </section>

            <footer class="page__footer"><p>
    
    

    
    
    
      
    
      
    
      
    

    
      
      
          
            
            
                <br/><span class="active">$ echo $LANG<br/><b>English</b></span><br/>

            
          
      
    
</p>
<br /><br />
<p class="copyright">Â© 2025 Charles Ancheta. MIT</p>
<p class="advertisement">
  Powered by <a href="https://gohugo.io/">hugo</a> and my own
  <a href="https://github.com/cbebe/risotto">fork</a> of
  <a href="https://github.com/joeroe/risotto">risotto</a>.
</p>
</footer>

        </div>
    </body>

</html>
